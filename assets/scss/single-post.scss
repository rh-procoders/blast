@import "_variable";

html {
  scroll-behavior : smooth;
}

.single-post {
  --header-h : 122px;

  @include tablet {
	--header-h : calc(114px + 20px); // top offset
  }

  .main {
	// Unified grid columns - controls all sections (entry-content, entry-author, entry-related)
	--bs-grid-col-left   : 270px; // Left sidebar width
	--bs-grid-col-center : minmax(auto, 1060px); // Center content (flexible, max 1060px)
	--bs-grid-col-right  : 270px; // Right sidebar width
	--bs-grid-gap        : 3.75rem; // 60px - gap between columns

	// Unified grid template
	--bs-grid-template   : var(--bs-grid-col-left) var(--bs-grid-col-center) var(--bs-grid-col-right);

	// Container padding
	--bs-entry-padding-x : 30px;

	padding-top          : var(--header-h);

	@media(max-width : 1440px) {
	  --bs-grid-template : 100%;
	}
  }

  .entry-content {
	padding-top           : max(43px, 4.25rem); // 68px

	margin-left           : auto;
	margin-right          : auto;

	width                 : 100%;
	padding-left          : var(--bs-entry-padding-x);
	padding-right         : var(--bs-entry-padding-x);

	display               : grid;
	grid-template-columns : var(--bs-grid-template);
	gap                   : var(--bs-grid-gap);
	justify-content       : center;

	@media(max-width : 1440px) {
	  max-width    : 860px;
	  margin-left  : auto;
	  margin-right : auto;
	}

	&__sidebar-left {

	  @media (max-width : 1440px) {
		display : none;
	  }
	}

	&__sidebar-right {

	  @media (max-width : 1440px) {
		display : none;
	  }
	}

	&__the-content {
	  position : relative;

	  /**
	   * Gutenberg Elements
	   */

	  // Paragraph
	  p {
		font-family : $font-family-secondary;
		font-size   : font-size('xl'); // 18px, does not change
		line-height : 2;

		a {
		  color           : #FF654A;
		  text-decoration : underline;

		  transition      : color ease .3s;

		  &:hover,
		  &:focus {
			color : var(--wp--preset--color--dark-blue);
		  }
		}
	  }

	  // Headings
	  .wp-block-heading {
		font-family : $font-family-tertiary;
	  }

	  h2.wp-block-heading {
		margin-top     : max(60px, 5rem); // 80px
		margin-bottom  : 20px; // unchanged

		font-size      : max(24px, 2.25rem); // 36px
		font-weight    : 500;
		line-height    : 1.2;
		letter-spacing : calc(-1 * max(0.48px, 0.0575rem)); // -0.92px

		@include mobile {
		  margin-top     : 60px;
		  font-size      : 24px;
		  line-height    : 1.1;
		  letter-spacing : normal;
		}
	  }

	  h5.wp-block-heading {
		margin-top    : 40px; // unchanged
		margin-bottom : 10px; // unchanged

		font-size     : font-size('xl'); // 18px - unchanged
		font-weight   : 600;
		line-height   : 1.1;

		color         : #FF654A;
	  }

	  // Style as list-heading
	  h6.wp-block-heading {

		// Only works if list is directly under heading
		&:has(+ .wp-block-list) {
		  margin-top  : 40px;

		  font-family : $font-family-secondary;
		  font-size   : 18px;
		  font-weight : 700;
		  line-height : 2;

		  @include mobile {
			font-weight : 600;
			line-height : 1.2;
		  }
		}
	  }

	  .wp-block-image {
		margin-top    : 40px; // unchanged
		margin-right  : -10px;
		margin-left   : -10px;

		margin-bottom : 27px;

		//display        : flex;
		//flex-direction : column;

		@include mobile {
		  margin-left  : -30px;
		  margin-right : -30px;
		}

		img {
		  border-radius : max(22.395px, 2.5rem); // 40px
		}

		figcaption {
		  // positioning
		  // align-self       : flex-end;
		  float            : right;

		  margin-top       : max(10px, 20px); // 20px
		  // margin-bottom    : 27px;
		  margin-right     : max(10px, 1.25rem); // 20px

		  // typography
		  font-family      : $font-family-tertiary;
		  font-size        : max(10px, 0.875rem); // 14px
		  font-weight      : 500;
		  line-height      : 1.1;

		  // styles
		  color            : var(--wp--preset--color--dark-blue);
		  background-color : #F4F4F4;

		  border-radius    : 20px;
		  padding          : 7.3px 14px;

		  @include mobile {
			margin-right : 10px;

			font-size    : 10px;
		  }
		}
	  }

	  .wp-block-list {
		margin-top    : 0;
		margin-bottom : 20px;

		font-family   : $font-family-secondary;
		font-size     : 18px;
		font-weight   : 400;
		line-height   : 2;

		margin-left   : 0;
		padding-left  : 30px;

		@include tablet {
		  padding-left : 22px;
		  line-height  : 1.4;
		}

		li {
		  position   : relative;
		  margin-top : 6px;

		  @include mobile {
			margin-top : 20px;
		  }
		}

		strong {
		  font-weight : 700;

		  @include mobile {
			font-weight : 600;
		  }
		}

		@include mobile {
		  margin-top : 20px;
		}
	  }

	  ul.wp-block-list {
		list-style : none;

		li {

		  &:before {
			content          : "";

			position         : absolute;
			top              : 16px;
			left             : calc((4px + 6px) * -1);

			width            : 4px;
			height           : 4px;

			background-color : #FF654A;
			border-radius    : 1px;

			@include tablet {
			  width     : 6px;
			  height    : 6px;

			  top       : 10px;
			  left      : -22px; // same as ul padding
			  transform : none;
			}
		  }
		}
	  }

	  ol.wp-block-list {

		li {

		  &::marker {
			font-weight : 700;
		  }
		}
	  }

	  .wp-block-quote {
		position         : relative;
		overflow         : hidden;

		margin-top       : max(40px, 3.75rem); // 60px
		margin-bottom    : max(40px, 3.75rem); // 60px

		margin-left      : 0;
		margin-right     : 0;


		background-color : #F4F4F4;
		padding          : 4.375rem 7.5rem; // 70px 120px
		border-radius    : 31.223px; // unchanged

		@include tablet {
		  padding : 50px 31px 50px 32px;
		}

		p {
		  position    : relative;
		  z-index     : 1;

		  font-family : $font-family-primary;

		  font-size   : max(22px, 1.875rem); // 30px
		  font-weight : 400;
		  line-height : 1.5;

		  @include tablet {
			font-size : 22px;
		  }

		  strong {
			font-family : $font-family-tertiary;
			font-weight : 600;
		  }
		}

		&:after {
		  content             : "";
		  background-image    : url("../../img/blockquote-bg_desktop.png");
		  background-repeat   : no-repeat;
		  background-position : center;
		  background-size     : contain;

		  position            : absolute;

		  width               : calc(711px * 0.75);
		  height              : calc(827px * 0.75);

		  top                 : -90px;
		  left                : calc((100% - 310px));

		  @include mobile {
			top : -40px;
		  }
		}

		@include mobile {
		  margin-top    : 40px;
		  margin-bottom : 40px;

		  margin-left   : - 20px;
		  margin-right  : -20px;
		}


	  }
	}

	&__wrapper {
	  background-color : #FFFFFF;

	  border-radius    : 40px; // unchanged
	  padding          : max(40px, 3.75rem); // 60px

	  @include mobile {
		padding : 40px; // 60px

	  }
	}

	&__backlink {
	  // positioning
	  position        : absolute;
	  top             : calc((20px + max(10px, 0.875rem)) * -1);

	  // font
	  font-family     : $font-family-tertiary;
	  font-size       : max(10px, 0.875rem); // 14px
	  line-height     : 1.27;
	  font-weight     : 500;

	  // style
	  gap             : 5.5px;
	  display         : flex;
	  align-items     : center;

	  text-decoration : none !important;
	  color           : var(--wp--preset--color--dark-blue);

	  transition      : color ease .3s;

	  &:hover,
	  &:focus {
		color : #FF654A;
	  }

	  svg {
		transform : rotate(180deg);
	  }
	}

	// Main Content Elements
	&__title {
	  font-size      : max(26px, 3.75rem); // 60px
	  line-height    : 1.1;
	  font-weight    : 600;

	  letter-spacing : calc(-1 * max(0.48px, 0.075rem)); // -1.2px

	  @include mobile {
		font-size      : 24px;
		line-height    : 1.2;
		letter-spacing : normal;
	  }
	}

	&__excerpt {
	  margin-top  : max(20px, 2.5rem); // 40px

	  font-family : $font-family-secondary;

	  font-size   : max(16px, 1.25rem); // 20px
	  line-height : 1.4;
	  font-weight : 400;

	  p {
		font-family : inherit;
		font-size   : inherit;
		line-height : inherit;
		font-weight : inherit;
	  }
	}

	&__meta {
	  margin-top      : max(20px, 2.5rem); // 40px

	  gap             : 20px;
	  display         : flex;
	  justify-content : flex-start;
	  align-items     : center;

	  .post-author {
		gap : 10px;

		&__avatar {

		  @include mobile {
			width         : 36px;
			border-radius : 10px;
		  }
		}

		&__name {

		}
	  }

	  .post-date {
		font-family : $font-family-secondary;

		font-size   : 16px;
		font-weight : 500;
		line-height : 1.2;

		color       : #999DB2;

		@include mobile {
		  font-size : 14px;
		}
	  }
	}

	&__thumbnail {
	  margin-top    : max(20px, 2.5rem); // 40px
	  margin-bottom : max(20px, 2.5rem); // 40px

	  border-radius : max(22.395px, 2.5rem); // 40px
	  overflow      : hidden;

	  margin-left   : -10px;
	  margin-right  : -10px;

	  @include mobile {
		margin-left  : -30px;
		margin-right : -30px;
	  }
	}
  }

  .entry-author {
	margin-top            : 60px; // unchanged
	margin-left           : auto;
	margin-right          : auto;

	width                 : 100%;
	padding-left          : var(--bs-entry-padding-x);
	padding-right         : var(--bs-entry-padding-x);

	display               : grid;
	grid-template-columns : var(--bs-grid-template);
	gap                   : var(--bs-grid-gap);
	justify-content       : center;

	@media(max-width : 1440px) {
	  max-width    : 860px;
	  margin-left  : auto;
	  margin-right : auto;
	}

	&__wrapper {
	  grid-column      : 2; // Place in center column

	  border-radius    : 40px;
	  padding          : max(40px, 3.75rem); // 60px

	  background-color : #FFFFFF;

	  @media(max-width : 1440px) {
		grid-column : unset;
	  }
	}

	.post-author {
	  row-gap    : 20px; // 20px
	  column-gap : 40px; // 40px
	  flex-wrap  : wrap;

	  &__avatar {
		width         : max(120px, 9.375rem); // 150px
		border-width  : 3px;
		border-radius : max(30px, 2.5rem); // 40px

		@include mobile {
		  width         : 120px;
		  border-radius : 30px;
		}
	  }

	  &__info {
		gap            : 3px;
		display        : flex;
		flex-direction : column;

		@include mobile {
		  flex : 1 1 100%;
		}
	  }

	  &__name {
		font-family    : $font-family-primary;
		font-size      : max(40px, 3.125rem); // 50px
		font-weight    : 600;
		line-height    : 1.2;
		letter-spacing : calc(-1 * max(0.8px, 0.0625rem)); // -1px

		@include mobile {
		  font-size      : 40px;
		  letter-spacing : -0.8px;
		}
	  }

	  &__job-position {
		font-family : $font-family-primary;
		font-size   : max(24px, 1.875rem); // 30px
		font-weight : 400;
		line-height : 1.2;

		@include mobile {
		  font-size : 24px;
		}
	  }

	  &__bio {
		flex : 1 1 100%;
	  }
	}
  }

  .entry-related {
	margin-top            : max(100px, 10rem); // 160px
	margin-left           : auto;
	margin-right          : auto;

	width                 : 100%;
	padding-left          : var(--bs-entry-padding-x);
	padding-right         : var(--bs-entry-padding-x);

	display               : grid;
	grid-template-columns : var(--bs-grid-template);
	gap                   : var(--bs-grid-gap);
	justify-content       : center;

	@media(max-width : 1440px) {
	  max-width    : 860px;
	  margin-left  : auto;
	  margin-right : auto;
	}

	@include mobile {
	  margin-top : 100px;
	}

	&__wrapper {
	  grid-column : 2; // Place in center column

	  @media(max-width : 1440px) {
		grid-column : unset;
	  }
	}

	&__heading {
	  margin-bottom  : max(40px, 3.75rem); // 60px

	  font-family    : $font-family-primary;
	  font-size      : max(30px, 3.75rem); // 60px
	  font-weight    : 600;
	  line-height    : 1.1;
	  letter-spacing : calc(-1 * max(0.8px, 0.075rem)); // -1.2px

	  text-align     : center;

	  color          : var(--wp--preset--color--dark-blue);

	  @include tablet {
		margin-bottom  : 40px;
		letter-spacing : -0.8px;
	  }

	  @include mobile {
		font-size : 30px;
	  }

	  // Emphasize "like" word
	  strong {
		font-family : $font-family-tertiary;

		font-weight : 700;
	  }
	}

	&__grid {
	  display               : grid;
	  grid-template-columns : repeat(2, 1fr);
	  gap                   : max(40px, 3.75rem); // 60px

	  @include tablet {
		grid-template-columns : 1fr;
		gap                   : 40px;
	  }
	}
  }

  .entry-footer {

	.widget {
	  margin-bottom : 0;
	}
  }

  // Related Post Item Styles - Copied from blog-filter-item
  .related-post-item {
	--bs-filter-item-pt : max(20px, 2.5rem); // 40px
	--bs-filter-item-pr : max(20px, 2.5rem); // 40px
	--bs-filter-item-pb : max(30px, 2.5rem); // 40px
	--bs-filter-item-pl : max(20px, 2.5rem); // 40px

	display             : flex;
	flex-direction      : column;

	border-radius       : max(20px, 2.5rem); // 40px
	color               : var(--wp--preset--color--dark-blue) !important;
	background-color    : #FFFFFF;

	padding             : var(--bs-filter-item-pt) var(--bs-filter-item-pr) var(--bs-filter-item-pb) var(--bs-filter-item-pl);

	@include mobile {
	  --bs-filter-item-pt : 20px;
	  --bs-filter-item-pr : 20px;
	  --bs-filter-item-pb : 30px;
	  --bs-filter-item-pl : 20px;

	  border-radius       : 20px;
	}

	// Link wrapper
	&__link {
	  text-decoration : none !important;
	}

	// thumbnail
	&__image-figure,
	&__image-placeholder {
	  aspect-ratio  : 460 / 245;

	  border-radius : max(13.75px, 1.4375rem); // 23px
	  overflow      : hidden;

	  @include mobile {
		border-radius : 13.75px
	  }
	}

	&__image-figure {
	  position : relative;

	  img {
		position        : absolute;
		top             : 0;
		left            : 0;
		bottom          : 0;
		width           : 100%;
		height          : 100%;

		object-fit      : cover;
		object-position : 50% 50%;
	  }
	}

	&__image-placeholder {
	  background-color : #F4F4F4;
	}

	// Content
	&__content {
	  flex-grow      : 1;

	  display        : flex;
	  flex-direction : column;
	}

	// meta
	&__meta {
	  font-family : $font-family-tertiary; // -> 'Tomorrow'
	  font-size   : var(--wp--preset--font-size--fs-tag); // -> 12px | 14px
	  font-weight : font-weight('medium'); // -> 500
	  line-height : 1.1;

	  margin-top  : max(16px, 1.25rem); // 20px

	  gap         : 10px;
	  display     : flex;
	  flex-wrap   : wrap;

	  align-items : center;

	  @include mobile {
		margin-top : 16px;
		font-size  : 12px;
	  }
	}

	&__categories {
	  display : contents; // => makes it display inline with date
	  // it's child items become child items of __meta
	}

	&__category {
	  padding          : 7.3px 14px;
	  background-color : var(--wp--preset--color--dark-blue);
	  border-radius    : 20px;

	  color            : #FFFFFF;
	  text-decoration  : none !important;

	  @include mobile {
		padding : 4.9px 11.9px;
	  }
	}

	&__read-time {

	}

	// Title
	&__title {
	  margin         : max(18px, 1.25rem) 0 0; // 20px top

	  font-size      : max(24px, 1.875rem); // 30px
	  font-weight    : font-weight('semibold');
	  line-height    : 1.2;
	  letter-spacing : calc(-1 * max(0.48px, 0.0375rem)); // -0.6px

	  color          : inherit;

	  @include mobile {
		margin-top     : 18px;
		letter-spacing : -0.48px;
	  }
	}

	// Excerpt
	&__excerpt {
	  margin      : max(16px, 1.25rem) 0 0; // 20px top

	  font-family : $font-family-secondary;
	  font-weight : font-weight('regular');
	  font-size   : font-size('base'); // -> 16px
	  line-height : 1.4;

	  @include mobile {
		margin-top : 16px;
	  }
	}

	// Footer
	&__footer {
	  margin-top : auto;

	  .post-author {
		margin-top : 30px;
	  }
	}
  }
}
